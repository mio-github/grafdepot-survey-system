# 現地調査報告業務DXシステム - システム仕様書

**版数**: 1.0
**作成日**: 2025年10月16日
**対象**: 株式会社グラフデポ様
**作成元**: 株式会社ミオシステム

---

## 1. システム概要

### 1.1 システム目的

本システムは、現地調査における写真報告業務の効率化を目的とし、以下の課題を解決します:

- **課題1**: 撮影した写真と撮影位置・方角の照合に膨大な時間がかかる「パズルを解くような」複雑な作業
- **課題2**: 地図上への撮影ポイントと方向矢印の手作業による書き込み
- **課題3**: 調査員のメモの精度に依存する品質のばらつき
- **課題4**: 本社担当者の長時間労働と精神的負担

### 1.2 システム構成

```
┌─────────────────┐      ┌─────────────────┐      ┌─────────────────┐
│ スマートフォン  │ ───▶ │ クラウドサーバー │ ───▶ │ Web管理システム │
│   アプリ        │      │                 │      │                 │
│ (調査員向け)    │      │ (データ保存・連携)│      │ (本社担当者向け)│
└─────────────────┘      └─────────────────┘      └─────────────────┘
```

---

## 2. フェーズ別機能定義

本システムは2段階で開発・展開します。

---

## 📘 **フェーズ1: MVP開発** (最小実用製品)

**開発期間**: 約3〜4ヶ月
**概算費用**: 450万円〜550万円 (税抜)

### 目的

システムのコア機能に絞って開発し、現場で省力化効果を実証・検証します。

### フェーズ1の機能範囲

#### 2.1.1 スマートフォンアプリ (フェーズ1)

| 機能ID | 機能名 | 詳細 |
|--------|--------|------|
| P1-M-001 | GPS位置情報自動記録 | 写真撮影時に緯度・経度を自動取得しEXIFデータに記録 |
| P1-M-002 | 電子コンパス方位情報自動記録 | 撮影時の方角(0-360度)を自動取得し記録 |
| P1-M-003 | 写真撮影機能 | カメラを起動し、位置・方位情報を自動付与して撮影 |
| P1-M-004 | 撮影データ一覧表示 | 撮影した写真のサムネイル一覧表示 |
| P1-M-005 | クラウドアップロード | 撮影データをクラウドサーバーへアップロード |
| P1-M-006 | オフライン対応 | ネットワーク未接続時はローカル保存、接続回復時に自動送信 |
| P1-M-007 | 案件選択 | 調査案件を選択して撮影開始 |

**画面構成 (フェーズ1)**:
1. ログイン画面
2. 案件一覧画面
3. カメラ撮影画面 (GPS座標・方位表示付き)
4. 撮影済み写真一覧画面
5. アップロード状況画面

#### 2.1.2 Web管理システム (フェーズ1)

| 機能ID | 機能名 | 詳細 |
|--------|--------|------|
| P1-W-001 | ユーザー認証 | ログイン・ログアウト機能 |
| P1-W-002 | 案件管理 | 調査案件の登録・編集・削除 |
| P1-W-003 | 写真データ受信 | アプリからアップロードされた写真データを受信・保存 |
| P1-W-004 | 地図表示 | GoogleマップまたはOpenStreetMapによる地図表示 |
| P1-W-005 | 写真自動プロット | GPS情報を基に地図上に写真位置を自動マーキング (番号付き) |
| P1-W-006 | 方向矢印自動表示 | 方位情報を基に撮影方向を示す矢印を地図上に自動表示 |
| P1-W-007 | 写真ギャラリー | 撮影された写真を一覧表示 |
| P1-W-008 | 手動位置調整 | ドラッグ&ドロップでマーカーの位置を微調整 |
| P1-W-009 | 手動方向調整 | 矢印の角度を手動で回転調整 |
| P1-W-010 | PDF出力(基本) | 地図と写真を配置した基本的なPDFレポートを出力 |

**画面構成 (フェーズ1)**:
1. ログイン画面
2. ダッシュボード (案件一覧)
3. 案件詳細画面
4. 地図編集画面 (メイン画面)
   - 左側: 写真ギャラリー
   - 中央: 地図 (マーカーと矢印表示)
   - 右側: 選択中の写真詳細
5. PDF出力プレビュー画面

#### 2.1.3 クラウドサーバー (フェーズ1)

| 機能ID | 機能名 | 詳細 |
|--------|--------|------|
| P1-S-001 | データストレージ | 写真データ、位置情報、メタデータの保存 |
| P1-S-002 | REST API | アプリとWebシステム間のデータ連携API |
| P1-S-003 | 認証・認可 | JWT トークンベースの認証システム |
| P1-S-004 | ファイル管理 | 画像ファイルのアップロード・ダウンロード管理 |

---

## 📗 **フェーズ2: 本システム開発** (フル機能版)

**開発期間**: 約5〜6ヶ月
**概算費用**: 900万円〜1,200万円 (税抜)

### 目的

MVPの評価を基に、追加機能を開発し、業務の完全自動化・最適化を実現します。

### フェーズ2の追加機能

#### 2.2.1 スマートフォンアプリ (フェーズ2 追加機能)

| 機能ID | 機能名 | 詳細 |
|--------|--------|------|
| P2-M-001 | 撮り忘れ防止機能 | 指定された撮影ポイント(4方向など)のチェックリスト表示 |
| P2-M-002 | 撮影ガイド表示 | AR技術を用いた撮影方向ガイドの表示 |
| P2-M-003 | 音声メモ機能 | 写真に音声メモを付加 |
| P2-M-004 | 現地での写真確認 | 撮影した写真を現地で確認・削除・再撮影 |
| P2-M-005 | バッチアップロード | 複数案件分の写真を一括アップロード |
| P2-M-006 | 通知機能 | 撮影完了・アップロード完了・修正依頼などのプッシュ通知 |

#### 2.2.2 Web管理システム (フェーズ2 追加機能)

| 機能ID | 機能名 | 詳細 |
|--------|--------|------|
| P2-W-001 | AI画像解析 | 建物の輪郭検出、被写体の自動認識 |
| P2-W-002 | AI画像補正 | 明るさ・コントラストの自動調整、歪み補正 |
| P2-W-003 | 報告書テンプレート管理 | 複数の報告書テンプレートの登録・管理 |
| P2-W-004 | 報告書自動出力 | テンプレートに基づく報告書の完全自動生成 |
| P2-W-005 | Excel出力 | 既存フォーマットに準拠したExcelファイル出力 |
| P2-W-006 | 一括編集機能 | 複数の写真マーカーを一括で移動・調整 |
| P2-W-007 | ラベル自動生成 | 「調査物件を撮影」「境界付近(南西側)を撮影」などのラベル自動付与 |
| P2-W-008 | コメント機能 | 写真や案件に対するコメント・メモの追加 |
| P2-W-009 | 履歴管理 | 編集履歴の記録と復元機能 |
| P2-W-010 | データ分析ダッシュボード | 調査件数、処理時間などの統計情報表示 |
| P2-W-011 | 調査員パフォーマンス分析 | 調査員ごとの作業効率分析 |

#### 2.2.3 クラウドサーバー (フェーズ2 追加機能)

| 機能ID | 機能名 | 詳細 |
|--------|--------|------|
| P2-S-001 | AI処理エンジン | 画像解析・補正のためのAI処理基盤 |
| P2-S-002 | バックグラウンドジョブ | PDF生成、AI処理などの非同期処理管理 |
| P2-S-003 | データバックアップ | 自動バックアップと復旧機能 |
| P2-S-004 | ロギング・監視 | システムログの記録とエラー監視 |

---

## 3. データ構造

### 3.1 主要データモデル

#### 案件 (Project)
```
- 案件ID (projectId)
- 案件名 (projectName)
- 所在地 (address)
- 調査対象地住所 (targetAddress)
- 調査日 (surveyDate)
- 調査員ID (surveyorId)
- ステータス (status: 未着手/調査中/完了/承認済み)
- 作成日時 (createdAt)
- 更新日時 (updatedAt)
```

#### 写真データ (Photo)
```
- 写真ID (photoId)
- 案件ID (projectId)
- ファイル名 (fileName)
- ファイルパス (filePath)
- 撮影日時 (takenAt)
- GPS緯度 (latitude)
- GPS経度 (longitude)
- 撮影方位 (direction: 0-360度)
- サムネイルパス (thumbnailPath)
- ラベル (label: "調査物件を撮影"など) ※フェーズ2
- 音声メモパス (voiceMemoPath) ※フェーズ2
- 表示順序 (displayOrder)
```

#### 地図マーカー (MapMarker)
```
- マーカーID (markerId)
- 写真ID (photoId)
- 表示位置緯度 (displayLatitude) ※手動調整後の位置
- 表示位置経度 (displayLongitude)
- 表示方位 (displayDirection) ※手動調整後の方位
- マーカー番号 (markerNumber: 1, 2, 3...)
```

---

## 4. 非機能要件

### 4.1 性能要件

- **写真アップロード**: 1枚あたり10秒以内 (4G回線環境)
- **地図表示**: 初期表示3秒以内
- **PDF生成**: 写真10枚で30秒以内

### 4.2 セキュリティ要件

- HTTPS通信の使用
- JWT認証によるAPIアクセス制御
- パスワードのハッシュ化保存
- アップロードファイルのウイルススキャン (フェーズ2)

### 4.3 可用性要件

- システム稼働率: 99.0%以上 (フェーズ1) / 99.5%以上 (フェーズ2)
- 自動バックアップ: 日次 (フェーズ2)

### 4.4 互換性要件

- **スマートフォンアプリ**: iOS 14以上、Android 10以上
- **Webシステム**: Chrome, Safari, Edge の最新版

---

## 5. 開発スケジュール

### フェーズ1 (3〜4ヶ月)

| 期間 | フェーズ | 内容 |
|------|---------|------|
| 1ヶ月目 | 要件定義・設計 | 詳細設計、DB設計、画面設計 |
| 2〜3ヶ月目 | 開発・実装 | アプリ・Web・サーバー開発 |
| 4ヶ月目 | テスト・導入 | テスト、修正、本番リリース |

### フェーズ2 (5〜6ヶ月)

| 期間 | フェーズ | 内容 |
|------|---------|------|
| 1ヶ月目 | フェーズ1評価・要件確定 | MVP評価、追加要件定義 |
| 2〜5ヶ月目 | 追加機能開発 | AI機能、報告書自動生成など |
| 6ヶ月目 | テスト・本番展開 | 総合テスト、本番リリース |

---

## 6. 期待される導入効果

### フェーズ1

- 📊 **作業時間削減**: 報告書作成時間を50%削減
- ✅ **品質の標準化**: ヒューマンエラーの削減
- 🚀 **納品スピード向上**: 調査から報告書提出までのリードタイム短縮

### フェーズ2

- 📊 **作業時間削減**: 報告書作成時間を80%削減
- 🤖 **完全自動化**: AI活用による報告書の自動生成
- 📈 **データ活用**: 蓄積データの分析・活用による新規事業展開の可能性

---

## 7. 用語集

| 用語 | 説明 |
|------|------|
| MVP | Minimum Viable Product (最小実用製品) |
| EXIF | 画像ファイルに埋め込まれるメタデータ形式 |
| JWT | JSON Web Token (認証トークン方式) |
| AR | Augmented Reality (拡張現実) |
| REST API | HTTPベースのWeb API設計方式 |

---

## 8. 改訂履歴

| 版数 | 改訂日 | 改訂内容 | 作成者 |
|------|--------|----------|--------|
| 1.0 | 2025-10-16 | 初版作成 | ミオシステム |
