<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>グラフデポ 調査報告書作成システム - フェーズ1 MVP</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- フェーズ表示バナー -->
    <div class="phase-banner phase1">
        💻 フェーズ1: MVP開発 - Web管理システム
    </div>

    <!-- ヘッダー -->
    <header class="main-header">
        <div class="header-content">
            <div class="logo">
                <span class="logo-icon">📊</span>
                <span class="logo-text">グラフデポ 調査報告書作成システム</span>
                <span class="version-tag">Phase 1</span>
            </div>
            <nav class="header-nav">
                <a href="#" class="nav-link active">📋 案件一覧</a>
                <a href="#" class="nav-link">👤 ユーザー管理</a>
                <a href="#" class="nav-link">⚙️ 設定</a>
                <div class="user-menu">
                    <span>山田 太郎</span>
                    <button class="btn-logout">ログアウト</button>
                </div>
            </nav>
        </div>
    </header>

    <!-- メインコンテンツ -->
    <div class="main-container">
        <!-- ダッシュボード -->
        <div id="dashboard" class="view active">
            <div class="page-header">
                <h1>案件一覧</h1>
                <button class="btn btn-primary" onclick="alert('新規案件を作成します')">+ 新規案件</button>
            </div>

            <div class="project-grid">
                <div class="project-card" onclick="openMapEditor()">
                    <div class="project-card-header">
                        <div>
                            <span class="project-id">#3126627</span>
                            <h3>兵庫県相生市山手2丁目73</h3>
                        </div>
                        <span class="status-badge status-ready">編集可</span>
                    </div>
                    <div class="project-meta">
                        <div class="meta-row">
                            <span>📅 調査日: 2024年6月7日</span>
                            <span>📷 写真: 6枚</span>
                        </div>
                        <div class="meta-row">
                            <span>👤 調査員: 鈴木一郎</span>
                            <span>☁️ 受信済み</span>
                        </div>
                    </div>
                    <div class="project-actions">
                        <button class="btn btn-secondary">地図編集 →</button>
                        <button class="btn btn-text">PDF出力</button>
                    </div>
                </div>

                <div class="project-card">
                    <div class="project-card-header">
                        <div>
                            <span class="project-id">#3126628</span>
                            <h3>埼玉県秩父郡小鹿野町両神薄248-2</h3>
                        </div>
                        <span class="status-badge status-completed">完了</span>
                    </div>
                    <div class="project-meta">
                        <div class="meta-row">
                            <span>📅 調査日: 2024年7月16日</span>
                            <span>📷 写真: 8枚</span>
                        </div>
                        <div class="meta-row">
                            <span>👤 調査員: 佐藤花子</span>
                            <span>✓ 承認済み</span>
                        </div>
                    </div>
                    <div class="project-actions">
                        <button class="btn btn-text">詳細を見る</button>
                        <button class="btn btn-text">PDF出力</button>
                    </div>
                </div>

                <div class="project-card">
                    <div class="project-card-header">
                        <div>
                            <span class="project-id">#3126629</span>
                            <h3>東京都千代田区丸の内1-1-1</h3>
                        </div>
                        <span class="status-badge status-pending">未着手</span>
                    </div>
                    <div class="project-meta">
                        <div class="meta-row">
                            <span>📅 調査日: 2024年10月20日</span>
                            <span>📷 写真: 未撮影</span>
                        </div>
                        <div class="meta-row">
                            <span>👤 調査員: 田中三郎</span>
                            <span>⏳ 待機中</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 地図編集画面 -->
        <div id="mapEditor" class="view">
            <div class="map-editor-layout">
                <!-- 左サイドバー: 写真ギャラリー -->
                <aside class="sidebar-left">
                    <div class="sidebar-header">
                        <h3>📷 撮影写真 (6枚)</h3>
                        <button class="btn-icon" onclick="alert('一括アップロード')">☁️</button>
                    </div>

                    <div class="photo-list">
                        <div class="photo-item selected" onclick="selectPhoto(1)">
                            <img src="https://images.unsplash.com/photo-1518780664697-55e3ad937233?w=150&h=100&fit=crop" alt="Photo 1">
                            <div class="photo-item-info">
                                <span class="photo-number">1</span>
                                <div class="photo-details">
                                    <div class="photo-label">前面道路(南東側)</div>
                                    <div class="photo-direction">NW 315°</div>
                                </div>
                            </div>
                        </div>

                        <div class="photo-item" onclick="selectPhoto(2)">
                            <img src="https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=150&h=100&fit=crop" alt="Photo 2">
                            <div class="photo-item-info">
                                <span class="photo-number">2</span>
                                <div class="photo-details">
                                    <div class="photo-label">調査物件を撮影</div>
                                    <div class="photo-direction">SE 135°</div>
                                </div>
                            </div>
                        </div>

                        <div class="photo-item" onclick="selectPhoto(3)">
                            <img src="https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=150&h=100&fit=crop" alt="Photo 3">
                            <img src="https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=150&h=100&fit=crop" alt="Photo 4">
                            <div class="photo-item-info">
                                <span class="photo-number">3</span>
                                <div class="photo-details">
                                    <div class="photo-label">境界付近(南西側)</div>
                                    <div class="photo-direction">SW 225°</div>
                                </div>
                            </div>
                        </div>

                        <div class="photo-item" onclick="selectPhoto(4)">
                            <img src="https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=150&h=100&fit=crop" alt="Photo 4">
                            <div class="photo-item-info">
                                <span class="photo-number">4</span>
                                <div class="photo-details">
                                    <div class="photo-label">境界付近(北東側)</div>
                                    <div class="photo-direction">NE 45°</div>
                                </div>
                            </div>
                        </div>

                        <div class="photo-item" onclick="selectPhoto(5)">
                            <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=150&h=100&fit=crop" alt="Photo 5">
                            <div class="photo-item-info">
                                <span class="photo-number">5</span>
                                <div class="photo-details">
                                    <div class="photo-label">調査物件を撮影</div>
                                    <div class="photo-direction">N 0°</div>
                                </div>
                            </div>
                        </div>

                        <div class="photo-item" onclick="selectPhoto(6)">
                            <img src="https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?w=150&h=100&fit=crop" alt="Photo 6">
                            <div class="photo-item-info">
                                <span class="photo-number">6</span>
                                <div class="photo-details">
                                    <div class="photo-label">調査物件を撮影</div>
                                    <div class="photo-direction">E 90°</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </aside>

                <!-- 中央: 地図エリア -->
                <main class="map-area">
                    <div class="map-toolbar">
                        <button class="btn btn-text" onclick="closeMa pEditor()">← 案件一覧に戻る</button>
                        <div class="toolbar-title">
                            <h2>案件 #3126627: 兵庫県相生市山手2丁目73</h2>
                        </div>
                        <div class="toolbar-actions">
                            <button class="btn btn-secondary" onclick="alert('下書き保存しました')">💾 保存</button>
                            <button class="btn btn-primary" onclick="generatePDF()">📄 PDF出力</button>
                        </div>
                    </div>

                    <div class="map-container">
                        <!-- 地図の擬似表示 -->
                        <div class="map-mock">
                            <img src="https://api.mapbox.com/styles/v1/mapbox/streets-v11/static/134.8603,34.8015,15,0/800x600@2x?access_token=pk.eyJ1IjoiZXhhbXBsZSIsImEiOiJjazBiMWFiYWIwMDAwMDNwOGQ3dnBqMTRwIn0.example" alt="Map" style="width: 100%; height: 100%; object-fit: cover; opacity: 0.7;">

                            <!-- マーカーと矢印 (自動プロット) -->
                            <div class="map-marker" style="top: 30%; left: 40%;" draggable="true">
                                <div class="marker-pin">1</div>
                                <div class="marker-arrow" style="transform: rotate(315deg);">→</div>
                            </div>

                            <div class="map-marker" style="top: 45%; left: 55%;" draggable="true">
                                <div class="marker-pin">2</div>
                                <div class="marker-arrow" style="transform: rotate(135deg);">→</div>
                            </div>

                            <div class="map-marker" style="top: 60%; left: 38%;" draggable="true">
                                <div class="marker-pin">3</div>
                                <div class="marker-arrow" style="transform: rotate(225deg);">→</div>
                            </div>

                            <div class="map-marker" style="top: 35%; left: 60%;" draggable="true">
                                <div class="marker-pin">4</div>
                                <div class="marker-arrow" style="transform: rotate(45deg);">→</div>
                            </div>

                            <div class="map-marker" style="top: 50%; left: 48%;" draggable="true">
                                <div class="marker-pin">5</div>
                                <div class="marker-arrow" style="transform: rotate(0deg);">→</div>
                            </div>

                            <div class="map-marker" style="top: 48%; left: 65%;" draggable="true">
                                <div class="marker-pin">6</div>
                                <div class="marker-arrow" style="transform: rotate(90deg);">→</div>
                            </div>
                        </div>

                        <div class="map-legend">
                            <div class="legend-item">
                                <span class="legend-icon">📍</span>
                                <span>マーカー: ドラッグで移動可能</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-icon">→</span>
                                <span>矢印: 撮影方向 (回転可能)</span>
                            </div>
                        </div>
                    </div>
                </main>

                <!-- 右サイドバー: 写真詳細 -->
                <aside class="sidebar-right">
                    <div class="sidebar-header">
                        <h3>写真詳細</h3>
                    </div>

                    <div class="photo-detail">
                        <img src="https://images.unsplash.com/photo-1518780664697-55e3ad937233?w=300&h=225&fit=crop" alt="Selected Photo" class="detail-photo">

                        <div class="detail-info">
                            <div class="info-group">
                                <label>番号</label>
                                <input type="number" value="1" class="input-field">
                            </div>

                            <div class="info-group">
                                <label>ラベル</label>
                                <input type="text" value="前面道路(南東側)を撮影" class="input-field">
                            </div>

                            <div class="info-group">
                                <label>GPS座標</label>
                                <input type="text" value="34.8015, 134.8603" class="input-field" readonly>
                            </div>

                            <div class="info-group">
                                <label>撮影方位</label>
                                <input type="text" value="NW (315°)" class="input-field" readonly>
                            </div>

                            <div class="info-group">
                                <label>撮影日時</label>
                                <input type="text" value="2024/06/07 10:23" class="input-field" readonly>
                            </div>
                        </div>

                        <div class="detail-actions">
                            <button class="btn btn-secondary" style="width: 100%;" onclick="alert('マーカー位置を微調整できます')">
                                📍 地図上で位置調整
                            </button>
                            <button class="btn btn-text" style="width: 100%;" onclick="alert('この写真を削除します')">
                                🗑️ 削除
                            </button>
                        </div>
                    </div>
                </aside>
            </div>
        </div>
    </div>

    <!-- 機能説明パネル -->
    <div class="feature-panel">
        <h3>💻 Web管理システム (フェーズ1: MVP)</h3>
        <div class="feature-grid">
            <div class="feature-card">
                <div class="feature-icon">✓</div>
                <div class="feature-text">
                    <strong>自動マッピング</strong>
                    <p>GPS情報から地図上に自動プロット</p>
                </div>
            </div>
            <div class="feature-card">
                <div class="feature-icon">✓</div>
                <div class="feature-text">
                    <strong>方向矢印表示</strong>
                    <p>撮影方位を自動で矢印表示</p>
                </div>
            </div>
            <div class="feature-card">
                <div class="feature-icon">✓</div>
                <div class="feature-text">
                    <strong>手動調整機能</strong>
                    <p>ドラッグ&ドロップで位置・方向を微調整</p>
                </div>
            </div>
            <div class="feature-card">
                <div class="feature-icon">✓</div>
                <div class="feature-text">
                    <strong>PDF出力</strong>
                    <p>地図と写真を配置したレポート生成</p>
                </div>
            </div>
        </div>

        <div class="comparison-link">
            <a href="../../phase2-full/web-admin/index.html" class="btn btn-secondary">
                フェーズ2の機能を見る →
            </a>
        </div>
    </div>

    <script>
        function openMapEditor() {
            document.getElementById('dashboard').classList.remove('active');
            document.getElementById('mapEditor').classList.add('active');
        }

        function closeMapEditor() {
            document.getElementById('mapEditor').classList.remove('active');
            document.getElementById('dashboard').classList.add('active');
        }

        function selectPhoto(photoNum) {
            document.querySelectorAll('.photo-item').forEach(item => item.classList.remove('selected'));
            event.currentTarget.classList.add('selected');
            alert(`写真 ${photoNum} を選択しました`);
        }

        function generatePDF() {
            alert('📄 PDF生成中...\n\n✓ 地図に写真位置をプロット\n✓ 方向矢印を配置\n✓ 写真ギャラリーを生成\n\nPDFが生成されました！');
        }

        // ドラッグ可能なマーカー
        document.querySelectorAll('.map-marker').forEach(marker => {
            marker.addEventListener('dragstart', (e) => {
                e.dataTransfer.effectAllowed = 'move';
            });

            marker.addEventListener('dragend', (e) => {
                alert('マーカーの位置を更新しました');
            });
        });
    </script>
</body>
</html>
